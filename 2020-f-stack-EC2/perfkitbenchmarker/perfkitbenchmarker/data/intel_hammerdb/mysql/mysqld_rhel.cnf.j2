# For advice on how to change settings please see
# http://dev.mysql.com/doc/refman/8.0/en/server-configuration-defaults.html

[mysqld]
#
# Remove leading # and set to the amount of RAM for the most important data
# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.
# innodb_buffer_pool_size = 128M
#
# Remove the leading "# " to disable binary logging
# Binary logging captures changes between backups and is enabled by
# default. It's default setting is log_bin=binlog
# disable_log_bin
#
# Remove leading # to set options mainly useful for reporting servers.
# The server defaults are faster for transactions and fast SELECTs.
# Adjust sizes as needed, experiment to find the optimal values.
# join_buffer_size = 128M
# sort_buffer_size = 2M
# read_rnd_buffer_size = 2M
#
# Remove leading # to revert to previous value for default_authentication_plugin,
# this will increase compatibility with older clients. For background, see:
# https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_default_authentication_plugin
# default-authentication-plugin=mysql_native_password

datadir=/scratch/data/mysql
socket=/scratch/data/mysql/mysql.sock

log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid
bind-address="127.0.0.1"
port=3306
default-authentication-plugin=mysql_native_password

skip-log-bin
# general
max_connections=4000
table_open_cache=8000
table_open_cache_instances=16
back_log=1500
default_password_lifetime=0
ssl=0
performance_schema=OFF
max_prepared_stmt_count=128000
skip_log_bin=1
character_set_server=latin1
collation_server=latin1_swedish_ci
transaction_isolation=REPEATABLE-READ
# files
innodb_file_per_table
innodb_log_file_size=1024M
innodb_log_files_in_group=32
innodb_open_files=4000
# buffers
innodb_buffer_pool_size={{ innodb_buffer_pool_size }}
innodb_buffer_pool_instances={{ innodb_buffer_pool_instances }}
innodb_log_buffer_size={{ innodb_log_buffer_size }}
# tune
innodb_doublewrite={{ innodb_doublewrite }}
innodb_thread_concurrency={{ innodb_thread_concurrency  }}
innodb_flush_log_at_trx_commit={{ innodb_flush_log_at_trx_commit  }}
innodb_max_dirty_pages_pct={{ innodb_max_dirty_pages_pct }}
innodb_max_dirty_pages_pct_lwm={{ innodb_max_dirty_pages_pct_lwm }}
join_buffer_size={{ join_buffer_size }}
sort_buffer_size={{ sort_buffer_size }}
innodb_use_native_aio={{ innodb_use_native_aio }}
innodb_stats_persistent={{ innodb_stats_persistent }}
innodb_spin_wait_delay={{ innodb_spin_wait_delay }}
innodb_max_purge_lag_delay={{ innodb_max_purge_lag_delay }}
innodb_max_purge_lag={{ innodb_max_purge_lag }}
innodb_flush_method={{ innodb_flush_method }} 
innodb_checksum_algorithm={{ innodb_checksum_algorithm }}
innodb_io_capacity={{ innodb_io_capacity  }}
innodb_io_capacity_max={{ innodb_io_capacity_max }}
innodb_lru_scan_depth={{ innodb_lru_scan_depth }}
innodb_change_buffering={{ innodb_change_buffering  }}
innodb_read_only={{ innodb_read_only }}
innodb_page_cleaners={{ innodb_page_cleaners }}
innodb_undo_log_truncate={{ innodb_undo_log_truncate }}
# perf special
innodb_adaptive_flushing={{ innodb_adaptive_flushing }}
innodb_flush_neighbors={{ innodb_flush_neighbors }}
innodb_read_io_threads={{ innodb_read_io_threads }}
innodb_write_io_threads={{ innodb_read_io_threads }}
innodb_purge_threads={{ innodb_purge_threads }}
innodb_adaptive_hash_index={{ innodb_adaptive_hash_index }}
